<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mindful Living App</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@400;700&family=Pacifico&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />

    <style>
        /* General Styling */
        body {
            font-family: 'Nunito Sans', sans-serif;
            margin: 0;
            padding: 40px;
            background-color: #f8f0e3;
            color: #5c4d47;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
        }

        .app-container {
            background-color: #fffaf0;
            border-radius: 30px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.08);
            padding: 40px;
            width: 90%;
            max-width: 500px;
            text-align: center;
            display: flex;
            flex-direction: column;
            gap: 35px;
        }

        .view {
            display: none;
            flex-direction: column;
            gap: 30px;
        }

        .view.active {
            display: flex;
        }

        .section {
            padding-bottom: 25px;
            margin-bottom: 25px;
            border-bottom: 2px dashed #e0d8b4;
        }

        .section:last-of-type {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        h1 {
            font-size: 3em;
            font-weight: 700;
            color: #776054;
            margin: 0 0 30px 0;
            text-shadow: 1px 1px 0 #f0e6d2;
        }

        h2 {
            font-size: 1.8em;
            margin-bottom: 20px;
            color: #8fbc8f;
        }

        /* Personalized Welcome View */
        #welcome-view {
            justify-content: center;
            align-items: center;
            min-height: 50vh;
        }

        #welcome-message {
            font-family: 'Pacifico', cursive; /* A script font for the personal touch */
            font-size: 2.2em;
            color: #f08080; /* The requested pink color */
            line-height: 1.5;
            margin-bottom: 40px;
        }
        
        /* Buttons */
        .action-btn, .panic-btn, #music-btn, #back-to-home-btn, #start-breathing, #stop-breathing, #next-btn {
            background-color: #8fbc8f;
            color: #ffffff;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.1s ease;
            display: inline-flex;
            justify-content: center;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
            margin-top: 5px;
        }

        .action-btn:hover, #music-btn:hover, #back-to-home-btn:hover, #start-breathing:hover, #stop-breathing:hover, #next-btn:hover {
            background-color: #77a877;
            transform: translateY(-2px);
        }

        /* Other styles from previous code remain the same */
        .panic-btn { background-color: #f08080; }
        .panic-btn:hover { background-color: #e06e6e; }
        .btn-group { display: flex; flex-wrap: wrap; justify-content: center; gap: 15px; }
        #breathing-container { display: flex; flex-direction: column; align-items: center; }
        #breathing-circle { width: 120px; height: 120px; background-color: #a8dadc; border-radius: 50%; margin-bottom: 15px; transition: transform 6s ease-in-out; box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1); display: flex; justify-content: center; align-items: center; font-size: 1.8em; color: #1d3557; }
        .breathing-animation { transform: scale(1.4); }
        #breathing-instruction { font-size: 1.3em; font-weight: bold; color: #5c4d47; margin-bottom: 10px; }
        #breathing-timer { font-size: 1.8em; font-weight: 700; color: #457b9d; margin-bottom: 15px; }
        #breathing-controls button { margin: 0 10px; }
        #journal-form, #journal-area { background-color: #f4f0e7; border: 1px solid #e0d8b4; border-radius: 10px; padding: 25px; text-align: left; box-shadow: 3px 3px 5px rgba(0, 0, 0, 0.03); }
        #journal-form { display: flex; flex-direction: column; gap: 15px; }
        label { font-weight: bold; color: #776054; margin-bottom: 5px; display: block; }
        input, textarea { width: calc(100% - 22px); padding: 10px; border: 1px solid #d0c8b0; border-radius: 5px; font-size: 1em; box-sizing: border-box; margin-bottom: 10px; }
        textarea { min-height: 150px; resize: vertical; }
        #save-journal { background-color: #a8dadc; color: #1d3557; border: none; padding: 12px 20px; border-radius: 20px; font-size: 1.1em; cursor: pointer; transition: background-color 0.3s ease; margin-top: 10px; }
        #save-journal:hover { background-color: #8ac0c6; }
        #journal-area h2 { text-align: center; color: #776054; margin-bottom: 20px; font-style: italic; }
        #journal-entries { display: flex; flex-direction: column; gap: 15px; }
        .journal-entry { background-color: #fff; border: 1px solid #e0d8b4; padding: 15px; border-radius: 8px; text-align: left; box-shadow: 2px 2px 3px rgba(0, 0, 0, 0.02); }
        .entry-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; color: #8fbc8f; font-style: italic; font-size: 0.9em; }
        .entry-body { line-height: 1.7; color: #5c4d47; }
        .media-player { display: flex; flex-direction: column; align-items: center; }
        #track-title { font-size: 1.6em; margin-bottom: 20px; color: #776054; }
        .track-cover-container { width: 150px; height: 150px; border-radius: 15px; overflow: hidden; box-shadow: 0 6px 12px rgba(0, 0, 0, 0.05); margin-bottom: 25px; }
        .controls { display: flex; align-items: center; gap: 20px; margin-bottom: 25px; }
        .control-btn { background-color: #d8e2dc; color: #5c4d47; border: none; border-radius: 50%; width: 50px; height: 50px; font-size: 1.3em; cursor: pointer; display: flex; justify-content: center; align-items: center; transition: background-color 0.3s ease; }
        .control-btn:hover { background-color: #c2d4c9; }
        .play-pause-btn { width: 65px; height: 65px; background-color: #a8dadc; color: #1d3557; box-shadow: 0 5px 10px rgba(29, 53, 87, 0.1); }
        .play-pause-btn:hover { background-color: #8ac0c6; }
        .material-symbols-outlined { font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24 }
    </style>
</head>
<body>

    <div class="app-container">
        <div id="welcome-view" class="view active">
            <h1 id="welcome-message">
                Hey Akshara...<br>This is for you and you only...<br>From Himika
            </h1>
            <button class="action-btn" id="next-btn">
                <span class="material-symbols-outlined">favorite</span> Next
            </button>
        </div>

        <div id="home-view" class="view">
            <h1>Mindful Living</h1>
            <div class="section">
                <h2>Breathing Exercise</h2>
                <div id="breathing-container">
                    <div id="breathing-circle"></div>
                    <div id="breathing-instruction">Press Start to begin</div>
                    <div id="breathing-timer"></div>
                    <div id="breathing-controls">
                        <button class="action-btn" id="start-breathing">
                            <span class="material-symbols-outlined">psychology</span> Start
                        </button>
                        <button class="action-btn" id="stop-breathing" style="display: none;">
                            <span class="material-symbols-outlined">stop</span> Stop
                        </button>
                    </div>
                </div>
            </div>
            <div class="section">
                <div class="btn-group">
                    <button class="action-btn" id="grounding-btn">
                        <span class="material-symbols-outlined">nature_people</span> Grounding
                    </button>
                    <button class="panic-btn" id="panic-btn">
                        <span class="material-symbols-outlined">waving_hand</span> Panic Button
                    </button>
                    <button id="music-btn">
                        <span class="material-symbols-outlined">queue_music</span> Music
                    </button>
                </div>
            </div>
            <div class="section">
                <h2>My Journal</h2>
                <button class="action-btn" onclick="document.getElementById('journal-view').classList.add('active'); document.getElementById('home-view').classList.remove('active');">
                    <span class="material-symbols-outlined">book</span> Open Journal
                </button>
            </div>
        </div>

        <div id="music-player-view" class="view">
            <h2>Music & Podcasts</h2>
            <div class="media-player">
                <h3 id="track-title">Relaxing Music Track</h3>
                <div class="track-cover-container">
                    <img id="track-image" src="https://via.placeholder.com/150/c7e2d9/ffffff?text=Album+Art" alt="Track Cover">
                </div>
                <div class="controls">
                    <button class="control-btn" id="btn-rewind">
                        <span class="material-symbols-outlined">fast_rewind</span>
                    </button>
                    <button class="control-btn play-pause-btn" id="btn-play-pause">
                        <span class="material-symbols-outlined">play_arrow</span>
                    </button>
                    <button class="control-btn" id="btn-forward">
                        <span class="material-symbols-outlined">fast_forward</span>
                    </button>
                </div>
            </div>
            <button class="action-btn" id="back-to-home-btn">
                <span class="material-symbols-outlined">arrow_back</span> Back
            </button>
        </div>

        <div id="journal-view" class="view">
            <h2>Journal</h2>
            <div id="journal-form">
                <label for="journal-date">Date:</label>
                <input type="date" id="journal-date" required>
                <label for="emotion">Current Emotion:</label>
                <input type="text" id="emotion" placeholder="e.g., Calm, Anxious, Happy" required>
                <label for="journal-entry">Write here...</label>
                <textarea id="journal-entry" placeholder="Start writing your thoughts..." required></textarea>
                <button type="submit" id="save-journal">
                    <span class="material-symbols-outlined">save</span> Save Entry
                </button>
            </div>
            <div id="journal-area">
                <h2>Past Entries</h2>
                <div id="journal-entries"></div>
            </div>
            <button class="action-btn" onclick="document.getElementById('home-view').classList.add('active'); document.getElementById('journal-view').classList.remove('active'); loadJournalEntries();">
                <span class="material-symbols-outlined">arrow_back</span> Back
            </button>
        </div>
    </div>

    <audio id="background-music" loop>
        <source src="background_music.mp3" type="audio/mp3">
        Your browser does not support the audio element.
    </audio>

    <script>
        // JavaScript for all the interactive logic

        // --- View Switching and Welcome Logic ---
        const welcomeView = document.getElementById('welcome-view');
        const homeView = document.getElementById('home-view');
        const nextBtn = document.getElementById('next-btn');
        const musicPlayerView = document.getElementById('music-player-view');
        const musicBtn = document.getElementById('music-btn');
        const backToHomeBtn = document.getElementById('back-to-home-btn');
        const journalView = document.getElementById('journal-view');
        const backgroundMusic = document.getElementById('background-music');

        nextBtn.addEventListener('click', () => {
            welcomeView.classList.remove('active');
            homeView.classList.add('active');
            backgroundMusic.volume = 0.5; // Set volume to a softer level
            backgroundMusic.play().catch(e => console.error("Audio playback failed: ", e));
        });

        musicBtn.addEventListener('click', () => {
            homeView.classList.remove('active');
            musicPlayerView.classList.add('active');
        });

        backToHomeBtn.addEventListener('click', () => {
            musicPlayerView.classList.remove('active');
            homeView.classList.add('active');
        });

        // --- Breathing Exercise Logic ---
        const breathingCircle = document.getElementById('breathing-circle');
        const breathingInstruction = document.getElementById('breathing-instruction');
        const breathingTimer = document.getElementById('breathing-timer');
        const startBreathingBtn = document.getElementById('start-breathing');
        const stopBreathingBtn = document.getElementById('stop-breathing');
        let breathInterval;
        let isBreathing = false;
        let phase = 0;
        const phases = [
            { text: 'Breathe In...', duration: 4 },
            { text: 'Hold...', duration: 4 },
            { text: 'Breathe Out...', duration: 6 },
            { text: 'Hold...', duration: 4 }
        ];

        function runBreathingCycle() {
            if (!isBreathing) return;

            const currentPhase = phases[(phase) % phases.length];
            breathingInstruction.textContent = currentPhase.text;
            let timer = currentPhase.duration;
            breathingTimer.textContent = timer;
            breathingCircle.textContent = timer;

            if (currentPhase.text === 'Breathe In...') {
                breathingCircle.classList.add('breathing-animation');
            } else {
                breathingCircle.classList.remove('breathing-animation');
            }

            const countdown = setInterval(() => {
                if (!isBreathing) {
                    clearInterval(countdown);
                    return;
                }
                timer--;
                breathingTimer.textContent = timer > 0 ? timer : '';
                breathingCircle.textContent = timer > 0 ? timer : '';
                if (timer === 0) {
                    clearInterval(countdown);
                    phase++;
                    runBreathingCycle();
                }
            }, 1000);
        }

        startBreathingBtn.addEventListener('click', () => {
            isBreathing = true;
            startBreathingBtn.style.display = 'none';
            stopBreathingBtn.style.display = 'inline-flex';
            breathingTimer.textContent = '';
            breathingCircle.textContent = '';
            phase = 0;
            runBreathingCycle();
        });

        stopBreathingBtn.addEventListener('click', () => {
            isBreathing = false;
            clearInterval(breathInterval);
            breathingInstruction.textContent = 'Press Start to begin';
            breathingTimer.textContent = '';
            breathingCircle.textContent = '';
            breathingCircle.classList.remove('breathing-animation');
            startBreathingBtn.style.display = 'inline-flex';
            stopBreathingBtn.style.display = 'none';
        });

        // --- Grounding and Panic Button Logic ---
        const groundingBtn = document.getElementById('grounding-btn');
        const panicBtn = document.getElementById('panic-btn');

        groundingBtn.addEventListener('click', () => {
            alert("Grounding Exercise: List 5 things you can see, 4 things you can feel, 3 things you can hear, 2 things you can smell, and 1 thing you can taste.");
        });

        panicBtn.addEventListener('click', () => {
            const userChoice = confirm("Do you want to contact someone for support?\n\nOK: Call a support number.\nCancel: Open Instagram DMs.");

            if (userChoice) {
                window.location.href = "tel:+919876543210";
            } else {
                window.open("https://www.instagram.com/direct/t/17845118045754604/", "_blank");
            }
        });

        // --- Journal Logic (Saving and Displaying) ---
        const journalForm = document.getElementById('journal-form');
        const journalEntriesDiv = document.getElementById('journal-entries');
        const journalArea = document.getElementById('journal-area');

        function loadJournalEntries() {
            const entries = JSON.parse(localStorage.getItem('journalEntries')) || [];
            journalEntriesDiv.innerHTML = '';
            if (entries.length > 0) {
                entries.forEach(entry => {
                    const entryDiv = document.createElement('div');
                    entryDiv.classList.add('journal-entry');
                    entryDiv.innerHTML = `
                        <div class="entry-header">
                            <span>Date: ${entry.date}</span>
                            <span>Emotion: ${entry.emotion}</span>
                        </div>
                        <p class="entry-body">${entry.content}</p>
                    `;
                    journalEntriesDiv.prepend(entryDiv);
                });
                journalArea.style.display = 'block';
            } else {
                journalArea.style.display = 'none';
            }
        }

        journalForm.addEventListener('submit', (e) => {
            e.preventDefault();

            const date = document.getElementById('journal-date').value;
            const emotion = document.getElementById('emotion').value;
            const content = document.getElementById('journal-entry').value;

            if (date && emotion && content) {
                const entries = JSON.parse(localStorage.getItem('journalEntries')) || [];
                entries.push({ date, emotion, content });
                localStorage.setItem('journalEntries', JSON.stringify(entries));
                journalForm.reset();
                loadJournalEntries();
                alert("Journal entry saved to your journal!");
            } else {
                alert("Please fill in all fields.");
            }
        });

        window.addEventListener('load', loadJournalEntries);
    </script>
</body>
</html>
